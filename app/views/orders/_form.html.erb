<%= javascript_include_tag "products", "data-turbolinks-track" => true %>

<%= form_with model: @order, local: true do |form| %>
  <p>
    <%= form.label :UserName %><br>
    <%= form.collection_select(:user_id, User.all, :id, :first_name, { prompt: 'Select a UserName' }, prompt: true) %>
    <% @order.errors.full_messages_for(:user_id).each do |message| %>
      <div style="color:red"><%= message %></div>
    <% end %>
  </p>

  <%= form.fields_for :product_orders do |product_order_form| %>
    <p>
      <%= product_order_form.label :ProductName %><br>
      <%= product_order_form.collection_select(:id, Product.all, :id, :name, { prompt: 'Select a Product' }, prompt: true) %>
    </p>

    <p>
      <%= product_order_form.label :SubProductName %><br>
      <%= product_order_form.collection_select(:sub_product_id, [], :id, :company_name, prompt: 'Select a SubProduct') %>
    </p>
  <% end %>

  <p>
  <%= form.label :Quantity %><br>
  <%= form.text_field :quantity %>
  <% @order.errors.full_messages_for(:quantity).each do |message| %>
    <div style="color:red"><%= message %></div>
  <% end %>
  </p>

  <p>
    <%= form.submit %>
  </p>
<% end %>

<%= link_to 'Back', orders_path %><br><br>
<%= link_to 'Back to dashboard', root_path %>
